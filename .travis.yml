language: java
# Enable container-based infrastructure
# see http://docs.travis-ci.com/user/workers/container-based-infrastructure/
sudo: false
jdk:
- oraclejdk8
install:
- mvn -s .travis.maven.settings.xml -version -B
script:
- mvn -fae -s .travis.maven.settings.xml -Pitest clean install
notifications:
  email: false
env:
  global:
  - secure: h2UBs+L83eGd8+vTvd4B5sh+ixjp67JB/5Ko/zGAEt6a3hIgrhqyjiXJmaEH3+jzJZKXUcUC6uOuxXHwZ4ODeF+McHViOjqqUGEynJ7AsLXqSr5SSBKZuY/pb69phQnh7Br5w2D+5IFHWEcjrSo/kHDbeZBVAMFRDeGVwpHy2yA=
  - secure: BADgz+otMMO+gUlFNduU/mgFm1dOfv2ZWAYD3nO1nEwu7Y1QVUsqimHdlqntUcinILDVeD33oT27kElERvr7KyjfDEPSDAVUg5Y/5soezg/tBu0zi3iodAP2GynOMohS/Rfm4+3ajWuEe/Y2SYjFXgldMR9qjP+/31FsVtW8Op0=
  - secure: gVyufsjZv/cZJnodd+kZbeUS7pyY9eEPCN0KP7y6EUhdpbJ/6sl07MKPKjg2p9OcSrYUBhm/9eEb9jRoisIaRsxGymqH2hTltYsrgsxwUOwRGbbbRkvtZFt/Xhj20UJEkMLzGpEcwVIUdWPaco5oVtZ0FQxQMAqsdMuixNw48xrZbAwvaOfcCRlrsCiXZ5wMfMdfu+884xWoN7fNt2P3uZTri02w04Jyjl23dYx+OOLk2v4DKhr0W7sicG4gVIgMp9krj+D/gSGDOsNIR7Lp5hQbqWAHXkPzF+oyEM5L8x0rmehrVuX85AusvCBmkiawUWBSHS80kmOvcmxJazT/uROwDluGwSQiLvv/L09lIJCqya3aIb71VSKXMyahwopF5vbDagiywPAUmvs9OoD0wIdSA9CrZfEOFxfXDQJir8Xqipmj7mHrLRYfN30U2dWS96CriwKuCmdW9pVAlhtilEXShAg+MZjkc+HRYDQTguPE1TAfpZMEOuQly8wS2eyvBYJdr3NY09BlPojAYMu09yHwkII3e9y/oGZMkLJkuRCjaZgGzSpG9I2xQZ1G6ccIWxrHU/tnmpYWFLoKO6a901HFO4zDzwAcK9CkADQ+wYRRjvvljB3ithTakAGtP/rq8nu6ZI9CqF3xvdRMXY4aKCX9f4Xg50kL8eRywWVcPZI=
  - secure: M6JUjFauRAhn8x9IvXl0Va6vUww3FeYMYJG4VxILVUx38RpKRRCtZQ4lzxf19UcWHoDuPfS15zp+OlsVPaOS3cUSRbagUQeRLPPElUo7UJRq/bEnrV6BXsz50DcTkGaHxBfyZj0ue34xxz6GYkwvbsv03eUyrz60BzCat2LNYFYrk1d5guVTtw8oPpHtuPXXv1Dn+9mQzcXbAqqB3FODNoNIvxqgk6lXohdV/Cq6MY/sT1kjaniIjpZnmLzAUUxZHZrxLAMBexaQM5V/3LVsViV3B5qk+IC1ioOmOcORCUc1lojsaG/EHxNd32nrpR2c85fk+0nx/xKlo+Pt5yPgzUvH55N3YeIHhZ0KxwEM3ZSgP1xPAUdv30ELiUx9KKiLIT+LvPRfI8Pl0lltscopxIxbUypNRFgPfnKv12MOIprOBT4iAnVvtkd74jSUMf/sxxHlb9xN8FvfzQUkYtYvzvMO5RYcMeWSOkvbF5fjvXZSJZzpKJj0FNslAbgWxfmFULgYGRo71dhQMFVXZlPxsWir7lLjmRdt09+8YZcRSRqZFOmrTvqY5LB6yRABHGvZHYCS/XQ8o003piZFHm8jHm/wrfwxwt0N1agX2DVFRiIp4lxOPjy0y43oPzUOV7NRVTesEP3duyo3r+LpY25d64ascilJnKsgUmLY9f+EldE=
after_success:
- PROJECT_VERSION=`mvn org.apache.maven.plugins:maven-help-plugin:2.1.1:evaluate -Dexpression=project.version | grep -v '\['`
- if [[ "$PROJECT_VERSION" =~ .*SNAPSHOT ]] && [[ "${TRAVIS_BRANCH}" = "master" ]] && [[ "${TRAVIS_PULL_REQUEST}" = "false" ]];
  then
   mvn  -s .travis.maven.settings.xml deploy -DskipTests ;
   #to be removed
   echo ${DEPLOYMENT_JENKINS}
   curl -X GET http://${DEPLOYMENT_JENKINS}/job/Build-Hawkular-Image/build?token=${DEPLOYMENT_JENKINS_TOKEN} ;
  fi
